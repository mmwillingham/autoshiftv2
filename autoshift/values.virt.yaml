# Minimal AutoShift Configuration
# This file contains the minimum required configuration for AutoShift
# Use this as a starting point and add additional features as needed
#
# IMPORTANT: Operator Label Requirements
# For each enabled operator, you must define ALL of these labels:
#   - {operator}: 'true'                    # Enable the operator
#   - {operator}-subscription-name: '...'   # OLM package name (required for scripts)
#   - {operator}-channel: '...'             # Operator channel
#   - {operator}-source: '...'              # Catalog source (usually redhat-operators)
#   - {operator}-source-namespace: '...'    # Catalog namespace (usually openshift-marketplace)
#
# The subscription-name label is required for:
#   - generate-imageset-config.sh: Detects operators for disconnected mirroring
#   - update-operator-channels.sh: Updates operator channels from catalog
#
# See docs/developer-guide.md for more details on label requirements.

# Git repository configuration (for Git mode)
autoshiftGitRepo: https://github.com/mmwillingham/autoshiftv2.git
autoshiftGitBranchTag: main

# Which hub clusterset this AutoShift instance manages
selfManagedHubSet: hub

# Optional: Enable versioned ClusterSet names for gradual rollout
# When true, appends version/branch to all clusterset names
# - OCI mode: uses autoshiftOciVersion (e.g., "hub" -> "hub-0-0-1")
# - Git mode: uses autoshiftGitBranchTag (e.g., "hub" -> "hub-main" or "hub-feature-xyz")
# Use this when deploying multiple AutoShift versions side-by-side
# versionedClusterSets: false

# Minimum Hub Cluster Configuration
hubClusterSets:
  hub:
    labels:
      ### mtv
      mtv: 'true'
      mtv-subscription-name: mtv-operator
      mtv-channel: stable
      mtv-source: redhat-operators
      mtv-source-namespace: openshift-marketplace

      ### node-maintenance
      node-maintenance: 'true'
      node-maintenance-subscription-name: node-maintenance-operator
      node-maintenance-channel: stable
      node-maintenance-source: redhat-operators
      node-maintenance-source-namespace: openshift-marketplace
      ### node-healthcheck
      node-healthcheck: 'true'
      node-healthcheck-subscription-name: node-healthcheck-operator
      node-healthcheck-channel: stable
      node-healthcheck-source: redhat-operators
      node-healthcheck-source-namespace: openshift-marketplace
      ### far
      far: 'true'
      far-subscription-name: fence-agents-remediation
      far-channel: stable
      far-source: redhat-operators
      far-source-namespace: openshift-marketplace

      ### kube-descheduler
      kube-descheduler: 'true'
      kube-descheduler-subscription-name: cluster-kube-descheduler-operator
      kube-descheduler-channel: stable
      kube-descheduler-source: redhat-operators
      kube-descheduler-source-namespace: openshift-marketplace
      
      ### oadp
      oadp: 'true'
      oadp-subscription-name: redhat-oadp-operator
      oadp-channel: stable
      oadp-source: redhat-operators
      oadp-source-namespace: openshift-marketplace
      
      # OpenShift Virtualization
      virt: 'true'
      virt-channel: stable
      virt-subscription-name: kubevirt-hyperconverged
        # virt-version: kubevirt-hyperconverged-operator.v4.20.3
      virt-source: redhat-operators
      virt-source-namespace: openshift-marketplace
      
      # Required: Indicates this is a self-managed hub cluster
      self-managed: 'true'

      # Required: OpenShift version for image mirroring and compatibility
      openshift-version: '4.20.13'

      ### OpenShift GitOps (REQUIRED)
      # GitOps is required to deploy AutoShift itself
      gitops: 'true'
      gitops-subscription-name: openshift-gitops-operator
      gitops-channel: gitops-1.19
      gitops-source: redhat-operators
      gitops-source-namespace: openshift-marketplace

      ### Advanced Cluster Management (AUTOMATIC)
      # ACM is automatically installed on all hub clustersets by policy
      acm-subscription-name: advanced-cluster-management
      acm-channel: release-2.15
      acm-source: redhat-operators
      acm-source-namespace: openshift-marketplace

# Optional: Managed (spoke) cluster sets
# Uncomment and configure if you have managed clusters
# managedClusterSets:
#   managed:
#     labels:
#       openshift-version: '4.18.28'
#       # Add additional labels for managed cluster features

# Optional: Exclude specific policies from deployment
excludePolicies:
#   - policy-name-to-exclude
  - advanced-cluster-security
  - ansible-automation-platform
#  - advanced-cluster-management
  - advanced-cluster-security
  - ansible-automation-platform
#  - cluster-labels
  - cluster-observability
  - developer-hub
  - dev-spaces
  - disconnected-mirror 
  - gitops-dev
  - infra-nodes
  - kiali
  - local-storage
  - logging
  - loki
  - lvm
  - machine-health-checks
  - manual-remediations
  - master-nodes
  - metallb
  - nmstate
  - node-feature-discovery
  - openshift-compliance-operator
  - openshift-data-foundation
  - openshift-dns
#   - openshift-gitops
  - openshift-image-registry
  - openshift-pipelines
#    - openshift-virtualization
  - quay
  - servicemesh3
  - storage-nodes
  - tempo
  - trusted-artifact-signer
  - worker-nodes

# Optional: Enable dry-run mode (policies in inform mode only)
# autoshift:
#   dryRun: false

# Minimal AutoShift Configuration
# This file contains the minimum required configuration for AutoShift
# Use this as a starting point and add additional features as needed
#
# IMPORTANT: Operator Label Requirements
# For each enabled operator, you must define ALL of these labels:
#   - {operator}: 'true'                    # Enable the operator
#   - {operator}-subscription-name: '...'   # OLM package name (required for scripts)
#   - {operator}-channel: '...'             # Operator channel
#   - {operator}-source: '...'              # Catalog source (usually redhat-operators)
#   - {operator}-source-namespace: '...'    # Catalog namespace (usually openshift-marketplace)
#
# The subscription-name label is required for:
#   - generate-imageset-config.sh: Detects operators for disconnected mirroring
#   - update-operator-channels.sh: Updates operator channels from catalog
#
# See docs/developer-guide.md for more details on label requirements.

# Git repository configuration (for Git mode)
autoshiftGitRepo: https://github.com/mmwillingham/autoshiftv2.git
autoshiftGitBranchTag: main

# Which hub clusterset this AutoShift instance manages
selfManagedHubSet: hub

# Optional: Enable versioned ClusterSet names for gradual rollout
# When true, appends version/branch to all clusterset names
# - OCI mode: uses autoshiftOciVersion (e.g., "hub" -> "hub-0-0-1")
# - Git mode: uses autoshiftGitBranchTag (e.g., "hub" -> "hub-main" or "hub-feature-xyz")
# Use this when deploying multiple AutoShift versions side-by-side
# versionedClusterSets: false

# Minimum Hub Cluster Configuration
hubClusterSets:
  hub:
    labels:
      ### machine-config-motd
      machine-config-motd: 'true'

      ### mtv
      mtv: 'true'
      mtv-subscription-name: mtv-operator
      mtv-channel: release-v2.10
      mtv-source: redhat-operators
      mtv-source-namespace: openshift-marketplace

      ### node-maintenance
      node-maintenance: 'true'
      node-maintenance-subscription-name: node-maintenance-operator
      node-maintenance-channel: stable
      node-maintenance-source: redhat-operators
      node-maintenance-source-namespace: openshift-marketplace

      ### node-healthcheck
      node-healthcheck: 'true'
      node-healthcheck-subscription-name: node-healthcheck-operator
      node-healthcheck-channel: stable
      node-healthcheck-source: redhat-operators
      node-healthcheck-source-namespace: openshift-marketplace

      ### far (fence agent remediation operator)
      far: 'true'
      far-subscription-name: fence-agents-remediation
      far-channel: stable
      far-source: redhat-operators
      far-source-namespace: openshift-marketplace

      ### kube-descheduler
      kube-descheduler: 'true'
      kube-descheduler-subscription-name: cluster-kube-descheduler-operator
      kube-descheduler-channel: stable
      kube-descheduler-source: redhat-operators
      kube-descheduler-source-namespace: openshift-marketplace

      ### OpenShift Data Foundation
      odf: 'true'
      odf-subscription-name: odf-operator
      # odf-version: 'odf-operator.v4.18.11-rhodf'
      odf-multi-cloud-gateway: standalone
      odf-noobaa-pvpool: ''
      odf-noobaa-store-size: ''
      odf-noobaa-store-num-volumes: ''
      odf-ocs-storage-class-name: 'gp3-csi'
      odf-ocs-storage-size: '2Ti'
      odf-ocs-storage-count: '2'
      odf-ocs-storage-replicas: '3'
      odf-resource-profile: balanced
      odf-channel: stable-4.20
      odf-source: redhat-operators
      odf-source-namespace: openshift-marketplace

      
      ### oadp
      oadp: 'true'
      oadp-subscription-name: redhat-oadp-operator
      oadp-channel: stable
      oadp-source: redhat-operators
      oadp-source-namespace: openshift-marketplace
      
      # OpenShift Virtualization
      virt: 'true'
      virt-channel: stable
      virt-subscription-name: kubevirt-hyperconverged
        # virt-version: kubevirt-hyperconverged-operator.v4.20.3
      virt-source: redhat-operators
      virt-source-namespace: openshift-marketplace
      
      # Required: Indicates this is a self-managed hub cluster
      self-managed: 'true'

      # Required: OpenShift version for image mirroring and compatibility
      openshift-version: '4.20.13'

      ### OpenShift GitOps (REQUIRED)
      # GitOps is required to deploy AutoShift itself
      gitops: 'true'
      gitops-subscription-name: openshift-gitops-operator
      gitops-channel: gitops-1.19
      gitops-source: redhat-operators
      gitops-source-namespace: openshift-marketplace

      ### Advanced Cluster Management (AUTOMATIC)
      # ACM is automatically installed on all hub clustersets by policy
      acm-subscription-name: advanced-cluster-management
      acm-channel: release-2.15
      acm-source: redhat-operators
      acm-source-namespace: openshift-marketplace

managedClusterSets:
  virt:
    labels:
      # Required: OpenShift version for image mirroring and compatibility
      openshift-version: '4.20.13'

      ### machine-config-motd
      machine-config-motd: 'true'

      ### Loki
      loki: 'true'
      loki-subscription-name: loki-operator
      # loki-version: 'loki-operator.v6.3.0'
      loki-channel: stable-6.4
      loki-source: redhat-operators
      loki-source-namespace: openshift-marketplace
      loki-size: 1x.extra-small
      loki-storageclass: gp3-csi
      loki-lokistack-name: logging-lokistack

      ### OpenShift Logging
      logging: 'true'
      logging-subscription-name: cluster-logging
      # logging-version: 'cluster-logging.v6.3.0'
      logging-channel: stable-6.4
      logging-source: redhat-operators
      logging-source-namespace: openshift-marketplace

      ### Cluster Observability Operator
      coo: 'true'
      coo-subscription-name: cluster-observability-operator
      # coo-version: 'cluster-observability-operator.v0.4.0'
      coo-channel: stable
      coo-source: redhat-operators
      coo-source-namespace: openshift-marketplace

      ### Kubernetes NMState Operator
      nmstate: 'true'
      nmstate-subscription-name: kubernetes-nmstate-operator
      nmstate-channel: stable
      nmstate-source: redhat-operators
      nmstate-source-namespace: openshift-marketplace
      # nmstate-version: 'kubernetes-nmstate-operator.v4.18.0-202410091522'
      #
      # === Bond Interface Configuration ===
      # nmstate-bond-{N}: Bond interface name (e.g., 'bond0')
      # nmstate-bond-{N}-mode: '802.3ad', 'active-backup', 'balance-rr', etc.
      # nmstate-bond-{N}-port-{M}: Port interface name (e.g., 'eno1')
      # nmstate-bond-{N}-mtu: MTU value (e.g., '9000')
      # nmstate-bond-{N}-mac: MAC address with dots (e.g., 'aa.bb.cc.dd.ee.ff')
      # nmstate-bond-{N}-miimon: MII monitoring interval in ms (e.g., '100')
      # nmstate-bond-{N}-ipv4: 'dhcp', 'static', or 'disabled'
      # nmstate-bond-{N}-ipv4-address-{M}: IP address (e.g., '192.168.1.10')
      # nmstate-bond-{N}-ipv4-address-{M}-cidr: CIDR prefix (e.g., '24')
      # nmstate-bond-{N}-ipv6: 'dhcp', 'autoconf', 'static', or 'disabled'
      #
      # === VLAN Interface Configuration ===
      # nmstate-vlan-{N}: VLAN interface name (e.g., 'bond0.100')
      # nmstate-vlan-{N}-id: VLAN ID (e.g., '100')
      # nmstate-vlan-{N}-base: Base interface (e.g., 'bond0')
      # nmstate-vlan-{N}-ipv4: 'dhcp', 'static', or 'disabled'
      #
      # === Static Routes ===
      # nmstate-route-{N}-dest: Destination network (e.g., '10.0.0.0')
      # nmstate-route-{N}-cidr: CIDR prefix (e.g., '8')
      # nmstate-route-{N}-gateway: Next hop (e.g., '192.168.1.1')
      # nmstate-route-{N}-interface: Outgoing interface (e.g., 'bond0')
      #
      # === DNS Configuration ===
      # nmstate-dns-server-{N}: DNS server IP (e.g., '8.8.8.8')
      # nmstate-dns-search-{N}: Search domain (e.g., 'example.com')
      #
      # === Node Selector ===
      # nmstate-nodeselector-{N}-prefix: Label prefix (e.g., 'node-role.kubernetes.io') - optional
      # nmstate-nodeselector-{N}-name: Label name (e.g., 'worker')
      # nmstate-nodeselector-{N}-value: Label value (e.g., '')
      #
      # === OVS Bridge Configuration (for UDN/localnet) ===
      # nmstate-ovs-bridge-{N}: OVS bridge name (e.g., 'ovs-br1')
      # nmstate-ovs-bridge-{N}-port-{M}: Port interface (e.g., 'eth1', 'bond0')
      # nmstate-ovs-bridge-{N}-stp: Spanning tree protocol (default: 'false')
      # nmstate-ovs-bridge-{N}-allow-extra-patch-ports: Allow OVN patch ports (default: 'true')
      # nmstate-ovs-bridge-{N}-mcast-snooping: Multicast snooping (optional)
      #
      # === OVN Bridge Mapping (for UDN localnet topology) ===
      # nmstate-ovn-mapping-{N}-localnet: Localnet name for UDN (e.g., 'localnet1')
      # nmstate-ovn-mapping-{N}-bridge: OVS bridge to map (e.g., 'ovs-br1')
      #
      # === Host-Specific Configuration ===
      # For per-host configs (different IPs per node), use the nmstate-host-{H} prefix:
      # nmstate-host-{H}-hostname: Target hostname (e.g., 'worker-0.ocp.example.com')
      # nmstate-host-{H}-bond-{N}: Bond name for this host
      # nmstate-host-{H}-bond-{N}-mode: Bond mode
      # nmstate-host-{H}-bond-{N}-port-{M}: Bond port
      # nmstate-host-{H}-bond-{N}-ipv4: 'dhcp', 'static', or 'disabled'
      # nmstate-host-{H}-bond-{N}-ipv4-address-{M}: Static IP for this host
      # nmstate-host-{H}-bond-{N}-ipv4-address-{M}-cidr: CIDR prefix
      # (Same pattern for vlan, ethernet, ovs-bridge, ovn-mapping, route, dns)
      #
      # === TEST: Ethernet Interface ===
      # nmstate-ethernet-1: 'eno3'
      # nmstate-ethernet-1-state: 'up'
      # nmstate-ethernet-1-mtu: '9000'
      #
      # === TEST: Bond with DHCP ===
      # nmstate-bond-1: 'bond0'
      # nmstate-bond-1-mode: '802.3ad'
      # nmstate-bond-1-port-1: 'eno1'
      # nmstate-bond-1-port-2: 'eno2'
      # nmstate-bond-1-mtu: '9000'
      # nmstate-bond-1-miimon: '100'
      # nmstate-bond-1-ipv4: 'dhcp'
      # nmstate-bond-1-ipv6: 'disabled'
      #
      # === TEST: Bond with Static IP ===
      # nmstate-bond-2: 'bond1'
      # nmstate-bond-2-mode: 'active-backup'
      # nmstate-bond-2-port-1: 'ens1f0'
      # nmstate-bond-2-port-2: 'ens1f1'
      # nmstate-bond-2-ipv4: 'static'
      # nmstate-bond-2-ipv4-address-1: '10.10.10.100'
      # nmstate-bond-2-ipv4-address-1-cidr: '24'
      # nmstate-bond-2-ipv6: 'disabled'
      #
      # === TEST: VLAN on Bond ===
      # nmstate-vlan-1: 'bond0.100'
      # nmstate-vlan-1-id: '100'
      # nmstate-vlan-1-base: 'bond0'
      # nmstate-vlan-1-ipv4: 'dhcp'
      #
      # nmstate-vlan-2: 'bond0.200'
      # nmstate-vlan-2-id: '200'
      # nmstate-vlan-2-base: 'bond0'
      # nmstate-vlan-2-mtu: '1500'
      # nmstate-vlan-2-ipv4: 'static'
      # nmstate-vlan-2-ipv4-address-1: '192.168.200.10'
      # nmstate-vlan-2-ipv4-address-1-cidr: '24'
      #
      # === TEST: Static Routes ===
      # nmstate-route-1-dest: '10.0.0.0'
      # nmstate-route-1-cidr: '8'
      # nmstate-route-1-gateway: '192.168.1.1'
      # nmstate-route-1-interface: 'bond0'
      # nmstate-route-1-metric: '100'
      #
       #nmstate-route-2-dest: '172.16.0.0'
      # nmstate-route-2-cidr: '12'
      # nmstate-route-2-gateway: '10.10.10.1'
      # nmstate-route-2-interface: 'bond1'
      #
      # === TEST: DNS Configuration ===
      # nmstate-dns-server-1: '8.8.8.8'
      # nmstate-dns-server-2: '8.8.4.4'
      # nmstate-dns-search-1: 'example.com'
      # nmstate-dns-search-2: 'cluster.local'
      #
      # === TEST: Node Selector (fake label - won't match any nodes) ===
      # nmstate-nodeselector-1-prefix: 'autoshift.io'
      # nmstate-nodeselector-1-name: 'nmstate-test'
      # nmstate-nodeselector-1-value: 'true'
      #
      # === TEST: OVS Bridge with OVN Mapping for UDN ===
      # nmstate-ovs-bridge-1: 'ovs-br1'
      # nmstate-ovs-bridge-1-port-1: 'eno4'
      # nmstate-ovs-bridge-1-stp: 'false'
      # nmstate-ovs-bridge-1-allow-extra-patch-ports: 'true'
      #
      # nmstate-ovn-mapping-1-localnet: 'localnet1'
      # nmstate-ovn-mapping-1-bridge: 'ovs-br1'
      #
      # === TEST: Host-Specific Config (for policy-nmstate-host-config) ===
      # Host 1 - bond with static IP
      # nmstate-host-1-hostname: 'test-worker-0.example.com'
      # nmstate-host-1-bond-1: 'bond0'
      # nmstate-host-1-bond-1-mode: '802.3ad'
      # nmstate-host-1-bond-1-port-1: 'eno1'
      # nmstate-host-1-bond-1-port-2: 'eno2'
      # nmstate-host-1-bond-1-ipv4: 'static'
      # nmstate-host-1-bond-1-ipv4-address-1: '192.168.1.10'
      # nmstate-host-1-bond-1-ipv4-address-1-cidr: '24'
      # nmstate-host-1-bond-1-ipv6: 'disabled'
      # nmstate-host-1-vlan-1: 'bond0.100'
      # nmstate-host-1-vlan-1-id: '100'
      # nmstate-host-1-vlan-1-base: 'bond0'
      # nmstate-host-1-vlan-1-ipv4: 'static'
      # nmstate-host-1-vlan-1-ipv4-address-1: '10.100.1.10'
      # nmstate-host-1-vlan-1-ipv4-address-1-cidr: '24'
      # nmstate-host-1-route-1-dest: '172.16.0.0'
      # nmstate-host-1-route-1-cidr: '12'
      # nmstate-host-1-route-1-gateway: '10.100.1.1'
      # nmstate-host-1-route-1-interface: 'bond0.100'
      #
      # Host 2 - different static IPs
      # nmstate-host-2-hostname: 'test-worker-1.example.com'
      # nmstate-host-2-bond-1: 'bond0'
      # nmstate-host-2-bond-1-mode: '802.3ad'
      # nmstate-host-2-bond-1-port-1: 'eno1'
      # nmstate-host-2-bond-1-port-2: 'eno2'
      # nmstate-host-2-bond-1-ipv4: 'static'
      # nmstate-host-2-bond-1-ipv4-address-1: '192.168.1.11'
      # nmstate-host-2-bond-1-ipv4-address-1-cidr: '24'
      # nmstate-host-2-bond-1-ipv6: 'disabled'
      # nmstate-host-2-vlan-1: 'bond0.100'
      # nmstate-host-2-vlan-1-id: '100'
      # nmstate-host-2-vlan-1-base: 'bond0'
      # nmstate-host-2-vlan-1-ipv4: 'static'
      # nmstate-host-2-vlan-1-ipv4-address-1: '10.100.1.11'
      # nmstate-host-2-vlan-1-ipv4-address-1-cidr: '24'
      # nmstate-host-2-dns-server-1: '10.0.0.1'
      # nmstate-host-2-dns-search-1: 'internal.example.com'
      #
      # === Legacy File-Based (deprecated) ===
      # nmstate-nncp-{name}: Filename in policies/nmstate/files/

      ### MetalLB
      metallb: 'true'
      metallb-subscription-name: metallb-operator
      # metallb-version: 'metallb-operator.v4.18.0-202509240837'
      metallb-source: redhat-operators
      metallb-source-namespace: openshift-marketplace
      metallb-channel: stable
      metallb-quota: 'false'
      # Set your quota if metallb-quota is enabled
      metallb-quota-cpu: ''
      metallb-quota-memory:
      # Specify the names of your IPPool files here
      metallb-ippool-1: ''
      #Specify your L2 Advertisement files here
      metallb-l2-1: ''
      # Specify the names of your BGP Advertisement files here
      metallb-bgp-1: ''
      # Specify the names of your Peer files here
      metallb-peer-1: ''

      ### mtv
      mtv: 'true'
      mtv-subscription-name: mtv-operator
      mtv-channel: release-v2.10
      mtv-source: redhat-operators
      mtv-source-namespace: openshift-marketplace

      ### node-maintenance
      node-maintenance: 'true'
      node-maintenance-subscription-name: node-maintenance-operator
      node-maintenance-channel: stable
      node-maintenance-source: redhat-operators
      node-maintenance-source-namespace: openshift-marketplace
      
      ### node-healthcheck
      node-healthcheck: 'true'
      node-healthcheck-subscription-name: node-healthcheck-operator
      node-healthcheck-channel: stable
      node-healthcheck-source: redhat-operators
      node-healthcheck-source-namespace: openshift-marketplace
      
      ### far
      far: 'true'
      far-subscription-name: fence-agents-remediation
      far-channel: stable
      far-source: redhat-operators
      far-source-namespace: openshift-marketplace

      ### kube-descheduler
      kube-descheduler: 'true'
      kube-descheduler-subscription-name: cluster-kube-descheduler-operator
      kube-descheduler-channel: stable
      kube-descheduler-source: redhat-operators
      kube-descheduler-source-namespace: openshift-marketplace
      
      ### oadp
      oadp: 'true'
      oadp-subscription-name: redhat-oadp-operator
      oadp-channel: stable
      oadp-source: redhat-operators
      oadp-source-namespace: openshift-marketplace

      ### OpenShift Data Foundation
      odf: 'true'
      odf-subscription-name: odf-operator
      # odf-version: 'odf-operator.v4.18.11-rhodf'
      odf-multi-cloud-gateway: standalone
      odf-noobaa-pvpool: ''
      odf-noobaa-store-size: ''
      odf-noobaa-store-num-volumes: ''
      odf-ocs-storage-class-name: 'gp3-csi'
      odf-ocs-storage-size: '2Ti'
      odf-ocs-storage-count: '2'
      odf-ocs-storage-replicas: '3'
      odf-resource-profile: balanced
      odf-channel: stable-4.20
      odf-source: redhat-operators
      odf-source-namespace: openshift-marketplace
      
      # OpenShift Virtualization
      virt: 'true'
      virt-channel: stable
      virt-subscription-name: kubevirt-hyperconverged
        # virt-version: kubevirt-hyperconverged-operator.v4.20.3
      virt-source: redhat-operators
      virt-source-namespace: openshift-marketplace
      
      # Required: Indicates this is a self-managed hub cluster
      #self-managed: 'false'

      # Required: OpenShift version for image mirroring and compatibility
      openshift-version: '4.20.13'

      ### OpenShift GitOps (REQUIRED)
      # GitOps is required to deploy AutoShift itself
      #       gitops: 'true'
      #       gitops-subscription-name: openshift-gitops-operator
      #       gitops-channel: gitops-1.19
      #       gitops-source: redhat-operators
      #       gitops-source-namespace: openshift-marketplace

# managedClusterSets:
#   managed:
#     labels:
#       test4: 'test'

# Optional: Exclude specific policies from deployment
excludePolicies:
#   - policy-name-to-exclude
#  - advanced-cluster-management
##  - advanced-cluster-security
##  - ansible-automation-platform
#  - cluster-labels
#  - cluster-observability
##  - developer-hub
##  - dev-spaces
##  - disconnected-mirror 
##  - gitops-dev
##  - infra-nodes
##  - kiali
##  - local-storage
#  - logging
#  - loki
##  - lvm
##  - machine-health-checks
##  - manual-remediations
##  - master-nodes
#  - metallb
#  - nmstate
##  - node-feature-discovery
##  - openshift-compliance-operator
#  - openshift-data-foundation
##  - openshift-dns
#   - openshift-gitops
##  - openshift-image-registry
##  - openshift-pipelines
#    - openshift-virtualization
##  - quay
##  - servicemesh3
##  - storage-nodes
##  - tempo
##  - trusted-artifact-signer
##  - worker-nodes

# Optional: Enable dry-run mode (policies in inform mode only)
# autoshift:
#   dryRun: false
